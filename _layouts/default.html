<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{{ page.title }} Â· {{ site.title }}</title>
  <meta name="description" content="{{ site.description }}" />
  <link rel="stylesheet" href="/assets/css/main.css?v={{ site.time | date: '%s' }}" />
</head>

<body>
  <header class="site-header">
    <div class="container header-row">
      <a class="brand" href="/">{{ site.title }}</a>

      <nav class="nav">
        <a href="/projects/">Projects</a>
        <a href="/research/">Research</a>
        <a href="/resume/">Resume</a>
        <a href="/contact/">Contact</a>
        <button class="theme-toggle" type="button" aria-label="Toggle dark mode" title="Toggle dark mode">ðŸŒ“</button>
      </nav>
    </div>
  </header>

  <main class="container">
    {{ content }}
  </main>

  <footer class="site-footer">
    <div class="container footer-row">
      <span>Â© {{ site.time | date: "%Y" }} {{ site.title }}</span>
      <span class="muted">Built on GitHub Pages</span>
    </div>
  </footer>

  <script>
  (() => {
    const key = "theme";
    const root = document.documentElement;

    // Apply saved theme early (if present)
    const saved = localStorage.getItem(key);
    if (saved === "dark" || saved === "light") root.setAttribute("data-theme", saved);

    const btn = document.querySelector(".theme-toggle");
    if (!btn) return;

    btn.addEventListener("click", () => {
      const cur = root.getAttribute("data-theme") || "light";
      const next = (cur === "dark") ? "light" : "dark";
      root.setAttribute("data-theme", next);
      localStorage.setItem(key, next);
    });
  })();
  </script>
  <script>
  (() => {
    const els = document.querySelectorAll(".reveal");
    if (!("IntersectionObserver" in window) || els.length === 0) {
      els.forEach(el => el.classList.add("is-visible"));
      return;
    }

    const obs = new IntersectionObserver((entries) => {
      for (const e of entries) {
        if (e.isIntersecting) {
          e.target.classList.add("is-visible");
          obs.unobserve(e.target);
        }
      }
    }, { threshold: 0.12, rootMargin: "0px 0px -10% 0px" });

    els.forEach(el => obs.observe(el));
  })();
  </script>
</body>
</html>